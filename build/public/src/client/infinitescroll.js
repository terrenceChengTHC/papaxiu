"use strict";define("forum/infinitescroll",function(){var e={};var r;var o=0;var t=false;var i;e.init=function(e,o){if(typeof e==="function"){r=e;i=$("body")}else{r=o;i=e||$("body")}$(window).off("scroll",n).on("scroll",n)};function n(){var e=utils.findBootstrapEnvironment();var n=(e==="xs"||e==="sm")&&$("html").hasClass("composing");if(t||n){return}var a=$(window).scrollTop();var f=$(window).height();var l=i.height()-f;var s=i.offset()?i.offset().top:0;var c=100*(a-s)/(l<=0?f:l);var v=20;var u=80;var d=a>o?1:-1;if(c<v&&a<o){r(d)}else if(c>u&&a>o){r(d)}else if(c<0&&d>0&&l<0){r(d)}o=a}e.loadMore=function(e,r,o){if(t){return}t=true;var i={method:e,data:r};$(window).trigger("action:infinitescroll.loadmore",i);socket.emit(i.method,i.data,function(e,r){if(e){t=false;return app.alertError(e.message)}o(r,function(){t=false})})};e.removeExtra=function(e,r,o){if(e.length<=o){return}var t=e.length-o;if(r>0){var i=$(document).height();var n=$(window).scrollTop();e.slice(0,t).remove();$(window).scrollTop(n+($(document).height()-i))}else{e.slice(e.length-t).remove()}};return e});
//# sourceMappingURL=public/src/client/infinitescroll.js.map