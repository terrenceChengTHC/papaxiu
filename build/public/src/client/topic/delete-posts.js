"use strict";define("forum/topic/delete-posts",["components","postSelect"],function(t,e){var i={};var n;var o;var s;i.init=function(){$(".topic").on("click",'[component="topic/delete/posts"]',c);$(window).on("action:ajaxify.start",a)};function a(){p();$(window).off("action:ajaxify.start",a)}function c(){app.parseAndTranslate("partials/delete_posts_modal",{},function(t){n=t;$("body").append(n);o=n.find("#delete_posts_confirm");s=n.find("#purge_posts_confirm");n.find(".close,#delete_posts_cancel").on("click",p);e.init(function(){l();r()});r();o.on("click",function(){d(o,"posts.deletePosts")});s.on("click",function(){d(s,"posts.purgePosts")})})}function d(t,i){t.attr("disabled",true);socket.emit(i,{tid:ajaxify.data.tid,pids:e.pids},function(e){t.removeAttr("disabled");if(e){return app.alertError(e.message)}p()})}function r(){if(e.pids.length){n.find("#pids").translateHtml("[[topic:fork_pid_count, "+e.pids.length+"]]")}else{n.find("#pids").translateHtml("[[topic:fork_no_pids]]")}}function l(){if(e.pids.length){o.removeAttr("disabled");s.removeAttr("disabled")}else{o.attr("disabled",true);s.attr("disabled",true)}}function p(){e.pids.forEach(function(e){t.get("post","pid",e).toggleClass("bg-success",false)});if(n){n.remove();n=null}t.get("topic").off("click","[data-pid]");e.enableClicksOnPosts()}return i});
//# sourceMappingURL=public/src/client/topic/delete-posts.js.map