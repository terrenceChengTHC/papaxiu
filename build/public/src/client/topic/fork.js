"use strict";define("forum/topic/fork",["components","postSelect"],function(t,i){var o={};var e;var n;o.init=function(){$(".topic").on("click",'[component="topic/fork"]',a);$(window).on("action:ajaxify.start",c)};function c(){d();$(window).off("action:ajaxify.start",c)}function a(){app.parseAndTranslate("partials/fork_thread_modal",{},function(t){e=t;n=e.find("#fork_thread_commit");$(document.body).append(e);e.find(".close,#fork_thread_cancel").on("click",d);e.find("#fork-title").on("keyup",r);i.init(function(){r();f()});f();n.on("click",s)})}function s(){n.attr("disabled",true);socket.emit("topics.createTopicFromPosts",{title:e.find("#fork-title").val(),pids:i.pids,fromTid:ajaxify.data.tid},function(o,e){function c(i){t.get("post","pid",i).fadeOut(500,function(){$(this).remove()})}n.removeAttr("disabled");if(o){return app.alertError(o.message)}app.alert({timeout:5e3,title:"[[global:alert.success]]",message:"[[topic:fork_success]]",type:"success",clickfn:function(){ajaxify.go("topic/"+e.slug)}});i.pids.forEach(function(t){c(t)});d()})}function f(){if(i.pids.length){e.find("#fork-pids").translateHtml("[[topic:fork_pid_count, "+i.pids.length+"]]")}else{e.find("#fork-pids").translateHtml("[[topic:fork_no_pids]]")}}function r(){if(e.find("#fork-title").val().length&&i.pids.length){n.removeAttr("disabled")}else{n.attr("disabled",true)}}function d(){i.pids.forEach(function(i){t.get("post","pid",i).toggleClass("bg-success",false)});if(e){e.remove();e=null}t.get("topic").off("click","[data-pid]");i.enableClicksOnPosts()}return o});
//# sourceMappingURL=public/src/client/topic/fork.js.map