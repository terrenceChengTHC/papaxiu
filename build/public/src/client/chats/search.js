"use strict";define("forum/chats/search",["components"],function(e){var t={};t.init=function(){var t=0;e.get("chat/search").on("keyup",function(){if(t){clearTimeout(t);t=0}t=setTimeout(r,250)})};function r(){var t=e.get("chat/search").val();var r=$('[component="chat/search/list"]');if(!t){return r.empty()}socket.emit("user.search",{query:t,searchBy:"username"},function(e,t){if(e){return app.alertError(e.message)}n(r,t)})}function n(e,t){e.empty();t.users=t.users.filter(function(e){return parseInt(e.uid,10)!==parseInt(app.user.uid,10)});if(!t.users.length){return e.translateHtml("<li><div><span>[[users:no-users-found]]</span></div></li>")}t.users.forEach(function(t){var r=s(e,t);a(r,t)})}function s(e,t){function r(){return(t.picture?'<img src="'+t.picture+'" title="'+t.username+'" />':'<div class="user-icon" style="background-color: '+t["icon:bgColor"]+'">'+t["icon:text"]+"</div>")+'<i class="fa fa-circle status '+t.status+'"></i> '+t.username}var n=$('<li component="chat/search/user" />').attr("data-uid",t.uid).appendTo(e);n.append(r());return n}function a(e,t){e.on("click",function(){socket.emit("modules.chats.hasPrivateChat",t.uid,function(e,r){if(e){return app.alertError(e.message)}if(r){require(["forum/chats"],function(e){e.switchChat(r)})}else{app.newChat(t.uid)}})})}return t});
//# sourceMappingURL=public/src/client/chats/search.js.map