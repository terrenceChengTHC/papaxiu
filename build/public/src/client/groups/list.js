"use strict";define("forum/groups/list",["forum/infinitescroll"],function(r){var t={};t.init=function(){r.init(t.loadMoreGroups);$('button[data-action="new"]').on("click",function(){bootbox.prompt("[[groups:new-group.group_name]]",function(r){if(r&&r.length){socket.emit("groups.create",{name:r},function(t){if(!t){ajaxify.go("groups/"+utils.slugify(r))}else{app.alertError(t.message)}})}})});var e=utils.params();$("#search-sort").val(e.sort||"alpha");$("#search-text").on("keyup",t.search);$("#search-button").on("click",t.search);$("#search-sort").on("change",function(){ajaxify.go("groups?sort="+$("#search-sort").val())})};t.loadMoreGroups=function(t){if(t<0){return}r.loadMore("groups.loadMore",{sort:$("#search-sort").val(),after:$('[component="groups/container"]').attr("data-nextstart")},function(r,t){if(r&&r.groups.length){templates.parse("partials/groups/list",{groups:r.groups},function(r){$("#groups-list").append(r);t()})}else{t()}if(r&&r.nextStart){$('[component="groups/container"]').attr("data-nextstart",r.nextStart)}})};t.search=function(){var r=$("#groups-list");var t=$("#search-text");var e=$("#search-sort");socket.emit("groups.search",{query:t.val(),options:{sort:e.val(),filterHidden:true}},function(t,e){if(t){return app.alertError(t.message)}e=e.filter(function(r){return r.name!=="registered-users"&&r.name!=="guests"});templates.parse("partials/groups/list",{groups:e},function(t){r.empty().append(t)})});return false};return t});
//# sourceMappingURL=public/src/client/groups/list.js.map