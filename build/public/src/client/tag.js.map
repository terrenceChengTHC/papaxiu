{"version":3,"sources":["public/src/client/tag.js"],"names":["define","recent","infinitescroll","Tag","init","app","enterRoom","$","height","window","children","length","show","on","loadMoreTopics","config","usePagination","direction","loadMore","set","ajaxify","data","tag","after","attr","count","topicsPerPage","done","topics","onTopicsLoaded","hide","nextStart"],"mappings":"AAAA,aAGAA,OAAO,aAAc,eAAgB,wBAAyB,SAAUC,EAAQC,GAC/E,IAAIC,KAEJA,EAAIC,KAAO,WACVC,IAAIC,UAAU,QAEd,GAAIC,EAAE,QAAQC,UAAYD,EAAEE,QAAQD,UAAYD,EAAE,0BAA0BG,WAAWC,QAAU,GAAI,CACpGJ,EAAE,kBAAkBK,OAGrBL,EAAE,kBAAkBM,GAAG,QAAS,WAC/BC,MAGD,IAAKC,OAAOC,cAAe,CAC1Bd,EAAeE,KAAKU,GAGrB,SAASA,EAAeG,GACvB,GAAIA,EAAY,IAAMV,EAAE,0BAA0BI,OAAQ,CACzD,OAGDT,EAAegB,SAAS,0BACvBC,IAAK,OAASC,QAAQC,KAAKC,IAAM,UACjCC,MAAOhB,EAAE,0BAA0BiB,KAAK,kBACxCC,MAAOV,OAAOW,eACZ,SAAUL,EAAMM,GAClB,GAAIN,EAAKO,QAAUP,EAAKO,OAAOjB,OAAQ,CACtCV,EAAO4B,eAAe,MAAOR,EAAKO,OAAQ,MAAOD,OAC3C,CACNA,IACApB,EAAE,kBAAkBuB,OAErBvB,EAAE,0BAA0BiB,KAAK,iBAAkBH,EAAKU,eAK3D,OAAO5B","file":"public/src/client/tag.js","sourcesContent":["'use strict';\n\n\ndefine('forum/tag', ['forum/recent', 'forum/infinitescroll'], function (recent, infinitescroll) {\n\tvar Tag = {};\n\n\tTag.init = function () {\n\t\tapp.enterRoom('tags');\n\n\t\tif ($('body').height() <= $(window).height() && $('[component=\"category\"]').children().length >= 20) {\n\t\t\t$('#load-more-btn').show();\n\t\t}\n\n\t\t$('#load-more-btn').on('click', function () {\n\t\t\tloadMoreTopics();\n\t\t});\n\n\t\tif (!config.usePagination) {\n\t\t\tinfinitescroll.init(loadMoreTopics);\n\t\t}\n\n\t\tfunction loadMoreTopics(direction) {\n\t\t\tif (direction < 0 || !$('[component=\"category\"]').length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinfinitescroll.loadMore('topics.loadMoreFromSet', {\n\t\t\t\tset: 'tag:' + ajaxify.data.tag + ':topics',\n\t\t\t\tafter: $('[component=\"category\"]').attr('data-nextstart'),\n\t\t\t\tcount: config.topicsPerPage,\n\t\t\t}, function (data, done) {\n\t\t\t\tif (data.topics && data.topics.length) {\n\t\t\t\t\trecent.onTopicsLoaded('tag', data.topics, false, done);\n\t\t\t\t} else {\n\t\t\t\t\tdone();\n\t\t\t\t\t$('#load-more-btn').hide();\n\t\t\t\t}\n\t\t\t\t$('[component=\"category\"]').attr('data-nextstart', data.nextStart);\n\t\t\t});\n\t\t}\n\t};\n\n\treturn Tag;\n});\n"]}