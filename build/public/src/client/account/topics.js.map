{"version":3,"sources":["public/src/client/account/topics.js"],"names":["define","header","infinitescroll","AccountTopics","set","init","handleInfiniteScroll","ajaxify","data","theirid","_template","_set","config","usePagination","loadMore","direction","after","$","attr","count","topicsPerPage","done","topics","length","onTopicsLoaded","nextStart","callback","app","parseAndTranslate","html","append","find","timeago","createUserTooltips","utils","makeNumbersHumanReadable","window","trigger"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,uBAAwB,wBAAyB,SAAUC,EAAQC,GAClG,IAAIC,KACJ,IAAIC,EAEJD,EAAcE,KAAO,WACpBJ,EAAOI,OAEPF,EAAcG,qBAAqB,iBAAkB,OAASC,QAAQC,KAAKC,QAAU,YAGtFN,EAAcG,qBAAuB,SAAUI,EAAWC,GACzDP,EAAMO,EAEN,IAAKC,OAAOC,cAAe,CAC1BX,EAAeG,KAAKS,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAGDb,EAAeY,SAAS,0BACvBV,IAAKA,EACLY,MAAOC,EAAE,0BAA0BC,KAAK,kBACxCC,MAAOP,OAAOQ,eACZ,SAAUZ,EAAMa,GAClB,GAAIb,EAAKc,QAAUd,EAAKc,OAAOC,OAAQ,CACtCC,EAAehB,EAAKc,OAAQD,OACtB,CACNA,IAGDJ,EAAE,0BAA0BC,KAAK,iBAAkBV,EAAKiB,aAI1D,SAASD,EAAeF,EAAQI,GAC/BC,IAAIC,kBAAkB,iBAAkB,UAAYN,OAAQA,GAAU,SAAUO,GAC/EZ,EAAE,0BAA0Ba,OAAOD,GACnCA,EAAKE,KAAK,YAAYC,UACtBL,IAAIM,qBACJC,MAAMC,yBAAyBN,EAAKE,KAAK,2BACzCd,EAAEmB,QAAQC,QAAQ,wBAA0Bf,OAAQA,IACpDI,MAIF,OAAOvB","file":"public/src/client/account/topics.js","sourcesContent":["'use strict';\n\n\ndefine('forum/account/topics', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\n\tvar AccountTopics = {};\n\tvar set;\n\n\tAccountTopics.init = function () {\n\t\theader.init();\n\n\t\tAccountTopics.handleInfiniteScroll('account/topics', 'uid:' + ajaxify.data.theirid + ':topics');\n\t};\n\n\tAccountTopics.handleInfiniteScroll = function (_template, _set) {\n\t\tset = _set;\n\n\t\tif (!config.usePagination) {\n\t\t\tinfinitescroll.init(loadMore);\n\t\t}\n\t};\n\n\tfunction loadMore(direction) {\n\t\tif (direction < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tinfinitescroll.loadMore('topics.loadMoreFromSet', {\n\t\t\tset: set,\n\t\t\tafter: $('[component=\"category\"]').attr('data-nextstart'),\n\t\t\tcount: config.topicsPerPage,\n\t\t}, function (data, done) {\n\t\t\tif (data.topics && data.topics.length) {\n\t\t\t\tonTopicsLoaded(data.topics, done);\n\t\t\t} else {\n\t\t\t\tdone();\n\t\t\t}\n\n\t\t\t$('[component=\"category\"]').attr('data-nextstart', data.nextStart);\n\t\t});\n\t}\n\n\tfunction onTopicsLoaded(topics, callback) {\n\t\tapp.parseAndTranslate('account/topics', 'topics', { topics: topics }, function (html) {\n\t\t\t$('[component=\"category\"]').append(html);\n\t\t\thtml.find('.timeago').timeago();\n\t\t\tapp.createUserTooltips();\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\n\t\t\t$(window).trigger('action:topics.loaded', { topics: topics });\n\t\t\tcallback();\n\t\t});\n\t}\n\n\treturn AccountTopics;\n});\n"]}