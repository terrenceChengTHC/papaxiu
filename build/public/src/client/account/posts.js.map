{"version":3,"sources":["public/src/client/account/posts.js"],"names":["define","header","infinitescroll","AccountPosts","method","template","init","$","addClass","handleInfiniteScroll","_method","_template","config","usePagination","loadMore","direction","uid","ajaxify","data","theirid","after","attr","done","posts","length","onPostsLoaded","nextStart","callback","app","parseAndTranslate","html","append","find","timeago","createUserTooltips","utils","makeNumbersHumanReadable"],"mappings":"AAAA,aAGAA,OAAO,uBAAwB,uBAAwB,wBAAyB,SAAUC,EAAQC,GACjG,IAAIC,KACJ,IAAIC,EACJ,IAAIC,EAEJF,EAAaG,KAAO,WACnBL,EAAOK,OAEPC,EAAE,uDAAuDC,SAAS,kBAElEL,EAAaM,qBAAqB,0BAA2B,kBAG9DN,EAAaM,qBAAuB,SAAUC,EAASC,GACtDP,EAASM,EACTL,EAAWM,EACX,IAAKC,OAAOC,cAAe,CAC1BX,EAAeI,KAAKQ,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAGDb,EAAeY,SAASV,GACvBY,IAAKC,QAAQC,KAAKC,QAClBC,MAAOb,EAAE,uBAAuBc,KAAK,mBACnC,SAAUH,EAAMI,GAClB,GAAIJ,EAAKK,OAASL,EAAKK,MAAMC,OAAQ,CACpCC,EAAcP,EAAKK,MAAOD,OACpB,CACNA,IAEDf,EAAE,uBAAuBc,KAAK,iBAAkBH,EAAKQ,aAIvD,SAASD,EAAcF,EAAOI,GAC7BC,IAAIC,kBAAkBxB,EAAU,SAAWkB,MAAOA,GAAS,SAAUO,GACpEvB,EAAE,uBAAuBwB,OAAOD,GAChCA,EAAKE,KAAK,4BAA4BxB,SAAS,kBAC/CsB,EAAKE,KAAK,YAAYC,UACtBL,IAAIM,qBACJC,MAAMC,yBAAyBN,EAAKE,KAAK,2BACzCL,MAIF,OAAOxB","file":"public/src/client/account/posts.js","sourcesContent":["'use strict';\n\n\ndefine('forum/account/posts', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\n\tvar AccountPosts = {};\n\tvar method;\n\tvar template;\n\n\tAccountPosts.init = function () {\n\t\theader.init();\n\n\t\t$('[component=\"post/content\"] img:not(.not-responsive)').addClass('img-responsive');\n\n\t\tAccountPosts.handleInfiniteScroll('posts.loadMoreUserPosts', 'account/posts');\n\t};\n\n\tAccountPosts.handleInfiniteScroll = function (_method, _template) {\n\t\tmethod = _method;\n\t\ttemplate = _template;\n\t\tif (!config.usePagination) {\n\t\t\tinfinitescroll.init(loadMore);\n\t\t}\n\t};\n\n\tfunction loadMore(direction) {\n\t\tif (direction < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tinfinitescroll.loadMore(method, {\n\t\t\tuid: ajaxify.data.theirid,\n\t\t\tafter: $('[component=\"posts\"]').attr('data-nextstart'),\n\t\t}, function (data, done) {\n\t\t\tif (data.posts && data.posts.length) {\n\t\t\t\tonPostsLoaded(data.posts, done);\n\t\t\t} else {\n\t\t\t\tdone();\n\t\t\t}\n\t\t\t$('[component=\"posts\"]').attr('data-nextstart', data.nextStart);\n\t\t});\n\t}\n\n\tfunction onPostsLoaded(posts, callback) {\n\t\tapp.parseAndTranslate(template, 'posts', { posts: posts }, function (html) {\n\t\t\t$('[component=\"posts\"]').append(html);\n\t\t\thtml.find('img:not(.not-responsive)').addClass('img-responsive');\n\t\t\thtml.find('.timeago').timeago();\n\t\t\tapp.createUserTooltips();\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\n\t\t\tcallback();\n\t\t});\n\t}\n\n\treturn AccountPosts;\n});\n"]}