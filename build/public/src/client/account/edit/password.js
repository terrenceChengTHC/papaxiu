"use strict";define("forum/account/edit/password",["forum/account/header","translator","zxcvbn"],function(a,s,e){var r={};r.init=function(){a.init();n()};function n(){var a=$("#inputCurrentPassword");var s=$("#password-notify");var r=$("#password-confirm-notify");var n=$("#inputNewPassword");var t=$("#inputNewPasswordAgain");var l=false;var d=false;function u(){var a=e(n.val());l=false;if(n.val().length<ajaxify.data.minimumPasswordLength){i(s,"[[user:change_password_error_length]]")}else if(!utils.isPasswordValid(n.val())){i(s,"[[user:change_password_error]]")}else if(n.val()===ajaxify.data.username){i(s,"[[user:password_same_as_username]]")}else if(n.val()===ajaxify.data.email){i(s,"[[user:password_same_as_email]]")}else if(a.score<ajaxify.data.minimumPasswordStrength){i(s,"[[user:weak_password]]")}else{o(s);l=true}}function f(){if(n.val()!==t.val()){i(r,"[[user:change_password_error_match]]");d=false}else{if(n.val()){o(r)}else{r.parent().removeClass("alert-success alert-danger");r.children().show();r.find(".msg").html("")}d=true}}n.on("blur",u);t.on("blur",f);$("#changePasswordBtn").on("click",function(){u();f();var s=$(this);if(l&&d||app.user.isAdmin){s.addClass("disabled").find("i").removeClass("hide");socket.emit("user.changePassword",{currentPassword:a.val(),newPassword:n.val(),uid:ajaxify.data.theirid},function(e){s.removeClass("disabled").find("i").addClass("hide");a.val("");n.val("");t.val("");d=false;l=false;if(e){u();f();return app.alertError(e.message)}window.location.href=config.relative_path+"/login"})}else{if(!d){app.alertError("[[user:change_password_error_match]]")}if(!l){app.alertError("[[user:change_password_error]]")}}return false})}function i(a,e){s.translate(e,function(s){a.html(s);a.parent().removeClass("show-success").addClass("show-danger")})}function o(a){a.html("");a.parent().removeClass("show-danger").addClass("show-success")}return r});
//# sourceMappingURL=public/src/client/account/edit/password.js.map