{"version":3,"sources":["public/src/client/reset_code.js"],"names":["define","ResetCode","init","reset_code","ajaxify","data","code","resetEl","$","password","repeat","on","val","length","minimumPasswordLength","app","alertError","prop","html","socket","emit","err","refresh","message","window","location","href","config","relative_path"],"mappings":"AAAA,aAGAA,OAAO,mBAAoB,WAC1B,IAAIC,KAEJA,EAAUC,KAAO,WAChB,IAAIC,EAAaC,QAAQC,KAAKC,KAE9B,IAAIC,EAAUC,EAAE,UAChB,IAAIC,EAAWD,EAAE,aACjB,IAAIE,EAASF,EAAE,WAEfD,EAAQI,GAAG,QAAS,WACnB,GAAIF,EAASG,MAAMC,OAAST,QAAQC,KAAKS,sBAAuB,CAC/DC,IAAIC,WAAW,8CACT,GAAIP,EAASG,QAAUF,EAAOE,MAAO,CAC3CG,IAAIC,WAAW,iDACT,CACNT,EAAQU,KAAK,WAAY,MAAMC,KAAK,2DACpCC,OAAOC,KAAK,qBACXd,KAAMH,EACNM,SAAUA,EAASG,OACjB,SAAUS,GACZ,GAAIA,EAAK,CACRjB,QAAQkB,UACR,OAAOP,IAAIC,WAAWK,EAAIE,SAG3BC,OAAOC,SAASC,KAAOC,OAAOC,cAAgB,WAGhD,OAAO,SAIT,OAAO3B","file":"public/src/client/reset_code.js","sourcesContent":["'use strict';\n\n\ndefine('forum/reset_code', function () {\n\tvar\tResetCode = {};\n\n\tResetCode.init = function () {\n\t\tvar reset_code = ajaxify.data.code;\n\n\t\tvar resetEl = $('#reset');\n\t\tvar password = $('#password');\n\t\tvar repeat = $('#repeat');\n\n\t\tresetEl.on('click', function () {\n\t\t\tif (password.val().length < ajaxify.data.minimumPasswordLength) {\n\t\t\t\tapp.alertError('[[reset_password:password_too_short]]');\n\t\t\t} else if (password.val() !== repeat.val()) {\n\t\t\t\tapp.alertError('[[reset_password:passwords_do_not_match]]');\n\t\t\t} else {\n\t\t\t\tresetEl.prop('disabled', true).html('<i class=\"fa fa-spin fa-refresh\"></i> Changing Password');\n\t\t\t\tsocket.emit('user.reset.commit', {\n\t\t\t\t\tcode: reset_code,\n\t\t\t\t\tpassword: password.val(),\n\t\t\t\t}, function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tajaxify.refresh();\n\t\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.location.href = config.relative_path + '/login';\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t};\n\n\treturn ResetCode;\n});\n"]}