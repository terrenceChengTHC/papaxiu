"use strict";define("admin/manage/groups",["translator"],function(a){var e={};var r=0;e.init=function(){var a=$("#create-modal");var e=$("#create-group-name");var r=$("#create-modal-go");var n=$("#create-modal-error");t();a.on("keypress",function(a){if(a.keyCode===13){r.click()}});$("#create").on("click",function(){a.modal("show");setTimeout(function(){e.focus()},250)});r.on("click",function(){var r={name:e.val(),description:$("#create-group-desc").val()};socket.emit("admin.groups.create",r,function(r){if(r){if(r.hasOwnProperty("message")&&utils.hasLanguageKey(r.message)){r="[[admin/manage/groups:alerts.create-failure]]"}n.translateHtml(r).removeClass("hide")}else{n.addClass("hide");e.val("");a.on("hidden.bs.modal",function(){ajaxify.refresh()});a.modal("hide")}})});$(".groups-list").on("click","button[data-action]",function(){var a=$(this);var e=a.attr("data-action");var r=a.parents("tr[data-groupname]").attr("data-groupname");switch(e){case"delete":bootbox.confirm("[[admin/manage/groups:alerts.confirm-delete]]",function(a){if(a){socket.emit("groups.delete",{groupName:r},function(a){if(a){return app.alertError(a.message)}ajaxify.refresh()})}});break}})};function t(){var e=$("#group-search");function t(){if(!e.val()){return ajaxify.refresh()}$(".pagination").addClass("hide");var r=$(".groups-list");socket.emit("groups.search",{query:e.val(),options:{sort:"date"}},function(e,t){if(e){return app.alertError(e.message)}templates.parse("admin/manage/groups","groups",{groups:t},function(e){a.translate(e,function(a){r.find("[data-groupname]").remove();r.find("tr").after(a)})})})}e.on("keyup",function(){if(r){clearTimeout(r);r=0}r=setTimeout(t,200)})}return e});
//# sourceMappingURL=public/src/admin/manage/groups.js.map