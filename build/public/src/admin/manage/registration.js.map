{"version":3,"sources":["public/src/admin/manage/registration.js"],"names":["define","Registration","init","$","on","parent","this","parents","action","attr","username","method","socket","emit","err","app","alertError","message","remove","email","invitedBy","removeRow","nextRow","next","thisRowinvitedBy","find","nextRowInvitedBy","html","undefined","length","bootbox","confirm"],"mappings":"AAAA,aAGAA,OAAO,4BAA6B,WACnC,IAAIC,KAEJA,EAAaC,KAAO,WACnBC,EAAE,eAAeC,GAAG,QAAS,gBAAiB,WAC7C,IAAIC,EAASF,EAAEG,MAAMC,QAAQ,mBAC7B,IAAIC,EAASL,EAAEG,MAAMG,KAAK,eAC1B,IAAIC,EAAWL,EAAOI,KAAK,iBAC3B,IAAIE,EAASH,IAAW,SAAW,gCAAkC,gCAErEI,OAAOC,KAAKF,GAAUD,SAAUA,GAAY,SAAUI,GACrD,GAAIA,EAAK,CACR,OAAOC,IAAIC,WAAWF,EAAIG,SAE3BZ,EAAOa,WAER,OAAO,QAGRf,EAAE,iBAAiBC,GAAG,QAAS,gBAAiB,WAC/C,IAAIC,EAASF,EAAEG,MAAMC,QAAQ,2CAC7B,IAAIY,EAAQd,EAAOI,KAAK,wBACxB,IAAIW,EAAYf,EAAOI,KAAK,mBAC5B,IAAID,EAASL,EAAEG,MAAMG,KAAK,eAC1B,IAAIE,EAAS,8BAEb,IAAIU,EAAY,WACf,IAAIC,EAAUjB,EAAOkB,OACrB,IAAIC,EAAmBnB,EAAOoB,KAAK,eACnC,IAAIC,EAAmBJ,EAAQG,KAAK,eACpC,GAAIC,EAAiBC,SAAWC,WAAaF,EAAiBC,OAAOE,OAAS,EAAG,CAChFH,EAAiBC,KAAKH,EAAiBG,QAExCtB,EAAOa,UAER,GAAIV,IAAW,SAAU,CACxBsB,QAAQC,QAAQ,2DAA4D,SAAUA,GACrF,GAAIA,EAAS,CACZnB,OAAOC,KAAKF,GAAUQ,MAAOA,EAAOC,UAAWA,GAAa,SAAUN,GACrE,GAAIA,EAAK,CACR,OAAOC,IAAIC,WAAWF,EAAIG,SAE3BI,SAKJ,OAAO,SAIT,OAAOpB","file":"public/src/admin/manage/registration.js","sourcesContent":["'use strict';\n\n\ndefine('admin/manage/registration', function () {\n\tvar Registration = {};\n\n\tRegistration.init = function () {\n\t\t$('.users-list').on('click', '[data-action]', function () {\n\t\t\tvar parent = $(this).parents('[data-username]');\n\t\t\tvar action = $(this).attr('data-action');\n\t\t\tvar username = parent.attr('data-username');\n\t\t\tvar method = action === 'accept' ? 'admin.user.acceptRegistration' : 'admin.user.rejectRegistration';\n\n\t\t\tsocket.emit(method, { username: username }, function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t}\n\t\t\t\tparent.remove();\n\t\t\t});\n\t\t\treturn false;\n\t\t});\n\n\t\t$('.invites-list').on('click', '[data-action]', function () {\n\t\t\tvar parent = $(this).parents('[data-invitation-mail][data-invited-by]');\n\t\t\tvar email = parent.attr('data-invitation-mail');\n\t\t\tvar invitedBy = parent.attr('data-invited-by');\n\t\t\tvar action = $(this).attr('data-action');\n\t\t\tvar method = 'admin.user.deleteInvitation';\n\n\t\t\tvar removeRow = function () {\n\t\t\t\tvar nextRow = parent.next();\n\t\t\t\tvar thisRowinvitedBy = parent.find('.invited-by');\n\t\t\t\tvar nextRowInvitedBy = nextRow.find('.invited-by');\n\t\t\t\tif (nextRowInvitedBy.html() !== undefined && nextRowInvitedBy.html().length < 2) {\n\t\t\t\t\tnextRowInvitedBy.html(thisRowinvitedBy.html());\n\t\t\t\t}\n\t\t\t\tparent.remove();\n\t\t\t};\n\t\t\tif (action === 'delete') {\n\t\t\t\tbootbox.confirm('[[admin/manage/registration:invitations.confirm-delete]]', function (confirm) {\n\t\t\t\t\tif (confirm) {\n\t\t\t\t\t\tsocket.emit(method, { email: email, invitedBy: invitedBy }, function (err) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treturn app.alertError(err.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tremoveRow();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t};\n\n\treturn Registration;\n});\n"]}