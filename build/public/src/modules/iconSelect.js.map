{"version":3,"sources":["public/src/modules/iconSelect.js"],"names":["define","iconSelect","init","el","onModified","doubleSize","hasClass","selected","attr","replace","$","removeClass","addClass","err","templates","parse","html","find","prepend","picker","bootbox","dialog","onEscape","backdrop","show","message","title","buttons","noIcon","label","className","callback","val","success","iconClass","categoryIconClass","on","modalEl","this","searchEl","modal","icons","submitEl","changeSelection","newSelection","length","first","selectRange","e","keyCode","each","idx","match","RegExp","hide","click"],"mappings":"AAAA,aAGAA,OAAO,aAAc,WACpB,IAAIC,KAEJA,EAAWC,KAAO,SAAUC,EAAIC,GAC/BA,EAAaA,GAAc,aAC3B,IAAIC,EAAaF,EAAGG,SAAS,SAC7B,IAAIC,EAAWJ,EAAGK,KAAK,SAASC,QAAQ,QAAS,IAAIA,QAAQ,KAAM,IAAIA,QAAQ,OAAQ,IAEvFC,EAAE,oBAAoBC,YAAY,YAElC,GAAIJ,EAAU,CACb,IACCG,EAAE,wBAA0BH,GAAUK,SAAS,YAC9C,MAAOC,GACRN,EAAW,IAIbO,UAAUC,MAAM,0BAA4B,SAAUC,GACrDA,EAAON,EAAEM,GACTA,EAAKC,KAAK,aAAaC,QAAQR,EAAE,mCAEjC,IAAIS,EAASC,QAAQC,QACpBC,SAAU,KACVC,SAAU,KACVC,KAAM,MACNC,QAAST,EACTU,MAAO,iBACPC,SACCC,QACCC,MAAO,UACPC,UAAW,cACXC,SAAU,WACT5B,EAAGK,KAAK,QAAS,OAASH,EAAa,SAAW,KAClDF,EAAG6B,IAAI,IACP7B,EAAGK,KAAK,QAAS,IAEjBJ,EAAWD,KAGb8B,SACCJ,MAAO,SACPC,UAAW,cACXC,SAAU,WACT,IAAIG,EAAYxB,EAAE,sBAAsBF,KAAK,SAC7C,IAAI2B,EAAoBzB,EAAE,UAAUE,SAASsB,GAAWvB,YAAY,MAAMA,YAAY,YAAYH,KAAK,SAEvG,GAAI2B,EAAmB,CACtBhC,EAAGK,KAAK,QAAS,OAASH,EAAa,SAAW,IAAM8B,GACxDhC,EAAG6B,IAAIG,GACPhC,EAAGK,KAAK,QAAS2B,GAGlB/B,EAAWD,QAMfgB,EAAOiB,GAAG,gBAAiB,WAC1B,IAAIC,EAAU3B,EAAE4B,MAChB,IAAIC,EAAWF,EAAQpB,KAAK,SAE5B,GAAIV,EAAU,CACb8B,EAAQpB,KAAK,IAAMV,GAAUK,SAAS,YACtC2B,EAASP,IAAIzB,EAASE,QAAQ,MAAO,QAEpC+B,MAAM,QAETrB,EAAOiB,GAAG,iBAAkB,WAC3B,IAAIC,EAAU3B,EAAE4B,MAChB,IAAIC,EAAWF,EAAQpB,KAAK,SAC5B,IAAIwB,EAAQJ,EAAQpB,KAAK,eACzB,IAAIyB,EAAWL,EAAQpB,KAAK,sBAE5B,SAAS0B,EAAgBC,GACxBP,EAAQpB,KAAK,cAAcN,YAAY,YACvC,GAAIiC,EAAc,CACjBA,EAAahC,SAAS,iBAChB,GAAI2B,EAASP,MAAMa,SAAW,EAAG,CACvC,GAAItC,EAAU,CACb8B,EAAQpB,KAAK,IAAMV,GAAUK,SAAS,iBAEjC,CACNyB,EAAQpB,KAAK,aAAa6B,QAAQlC,SAAS,aAK7C2B,EAASQ,YAAY,EAAGR,EAASP,MAAMa,QAEvCR,EAAQpB,KAAK,mBAAmBmB,GAAG,QAAS,IAAK,WAChDG,EAASP,IAAItB,EAAE4B,MAAM9B,KAAK,SAASC,QAAQ,SAAU,IAAIA,QAAQ,WAAY,KAC7EkC,EAAgBjC,EAAE4B,SAGnBC,EAASH,GAAG,QAAS,SAAUY,GAC9B,GAAIA,EAAEC,UAAY,GAAI,CAErBR,EAAMjB,OACNiB,EAAMS,KAAK,SAAUC,EAAKhD,GACzB,IAAKA,EAAG2B,UAAUsB,MAAM,IAAIC,OAAO,YAAcd,EAASP,MAAQ,QAAS,CAC1EtB,EAAEP,GAAImD,UAGRX,QACM,CACND,EAASa,gBAOd,OAAOtD","file":"public/src/modules/iconSelect.js","sourcesContent":["'use strict';\n\n\ndefine('iconSelect', function () {\n\tvar iconSelect = {};\n\n\ticonSelect.init = function (el, onModified) {\n\t\tonModified = onModified || function () {};\n\t\tvar doubleSize = el.hasClass('fa-2x');\n\t\tvar selected = el.attr('class').replace('fa-2x', '').replace('fa', '').replace(/\\s+/g, '');\n\n\t\t$('#icons .selected').removeClass('selected');\n\n\t\tif (selected) {\n\t\t\ttry {\n\t\t\t\t$('#icons .fa-icons .fa.' + selected).addClass('selected');\n\t\t\t} catch (err) {\n\t\t\t\tselected = '';\n\t\t\t}\n\t\t}\n\n\t\ttemplates.parse('partials/fontawesome', {}, function (html) {\n\t\t\thtml = $(html);\n\t\t\thtml.find('.fa-icons').prepend($('<i class=\"fa fa-nbb-none\"></i>'));\n\n\t\t\tvar picker = bootbox.dialog({\n\t\t\t\tonEscape: true,\n\t\t\t\tbackdrop: true,\n\t\t\t\tshow: false,\n\t\t\t\tmessage: html,\n\t\t\t\ttitle: 'Select an Icon',\n\t\t\t\tbuttons: {\n\t\t\t\t\tnoIcon: {\n\t\t\t\t\t\tlabel: 'No Icon',\n\t\t\t\t\t\tclassName: 'btn-default',\n\t\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\t\tel.attr('class', 'fa ' + (doubleSize ? 'fa-2x ' : ''));\n\t\t\t\t\t\t\tel.val('');\n\t\t\t\t\t\t\tel.attr('value', '');\n\n\t\t\t\t\t\t\tonModified(el);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\tlabel: 'Select',\n\t\t\t\t\t\tclassName: 'btn-primary',\n\t\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\t\tvar iconClass = $('.bootbox .selected').attr('class');\n\t\t\t\t\t\t\tvar categoryIconClass = $('<div/>').addClass(iconClass).removeClass('fa').removeClass('selected').attr('class');\n\n\t\t\t\t\t\t\tif (categoryIconClass) {\n\t\t\t\t\t\t\t\tel.attr('class', 'fa ' + (doubleSize ? 'fa-2x ' : '') + categoryIconClass);\n\t\t\t\t\t\t\t\tel.val(categoryIconClass);\n\t\t\t\t\t\t\t\tel.attr('value', categoryIconClass);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tonModified(el);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tpicker.on('show.bs.modal', function () {\n\t\t\t\tvar modalEl = $(this);\n\t\t\t\tvar searchEl = modalEl.find('input');\n\n\t\t\t\tif (selected) {\n\t\t\t\t\tmodalEl.find('.' + selected).addClass('selected');\n\t\t\t\t\tsearchEl.val(selected.replace('fa-', ''));\n\t\t\t\t}\n\t\t\t}).modal('show');\n\n\t\t\tpicker.on('shown.bs.modal', function () {\n\t\t\t\tvar modalEl = $(this);\n\t\t\t\tvar searchEl = modalEl.find('input');\n\t\t\t\tvar icons = modalEl.find('.fa-icons i');\n\t\t\t\tvar submitEl = modalEl.find('button.btn-primary');\n\n\t\t\t\tfunction changeSelection(newSelection) {\n\t\t\t\t\tmodalEl.find('i.selected').removeClass('selected');\n\t\t\t\t\tif (newSelection) {\n\t\t\t\t\t\tnewSelection.addClass('selected');\n\t\t\t\t\t} else if (searchEl.val().length === 0) {\n\t\t\t\t\t\tif (selected) {\n\t\t\t\t\t\t\tmodalEl.find('.' + selected).addClass('selected');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmodalEl.find('i:visible').first().addClass('selected');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Focus on the input box\n\t\t\t\tsearchEl.selectRange(0, searchEl.val().length);\n\n\t\t\t\tmodalEl.find('.icon-container').on('click', 'i', function () {\n\t\t\t\t\tsearchEl.val($(this).attr('class').replace('fa fa-', '').replace('selected', ''));\n\t\t\t\t\tchangeSelection($(this));\n\t\t\t\t});\n\n\t\t\t\tsearchEl.on('keyup', function (e) {\n\t\t\t\t\tif (e.keyCode !== 13) {\n\t\t\t\t\t\t// Filter\n\t\t\t\t\t\ticons.show();\n\t\t\t\t\t\ticons.each(function (idx, el) {\n\t\t\t\t\t\t\tif (!el.className.match(new RegExp('^fa fa-.*' + searchEl.val() + '.*$'))) {\n\t\t\t\t\t\t\t\t$(el).hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tchangeSelection();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsubmitEl.click();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n\n\treturn iconSelect;\n});\n\n"]}