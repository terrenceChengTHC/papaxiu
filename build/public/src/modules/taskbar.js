"use strict";define("taskbar",function(){var t={};t.init=function(){var a=this;templates.parse("modules/taskbar",{},function(e){a.taskbar=$(e);a.tasklist=a.taskbar.find("ul");$(document.body).append(a.taskbar);a.taskbar.on("click","li",function(){var a=$(this);var e=a.attr("data-module");var s=a.attr("data-uuid");require([e],function(e){if(!a.hasClass("active")){i();e.load(s);t.toggleNew(s,false);app.alternatingTitle("");t.tasklist.removeClass("active");a.addClass("active")}else{e.minimize(s)}});return false})})};t.discard=function(i,e){var s=t.tasklist.find('[data-module="'+i+'"][data-uuid="'+e+'"]');s.remove();a()};t.push=function(a,i,s){var n=t.tasklist.find('li[data-uuid="'+i+'"]');var d={module:a,uuid:i,options:s,element:n};$(window).trigger("filter:taskbar.push",d);if(!n.length&&d.module){e(d)}};t.get=function(t){var a=$('[data-module="'+t+'"]').map(function(t,a){return $(a).data()});return a};t.minimize=function(a,i){var e=t.tasklist.find('[data-module="'+a+'"][data-uuid="'+i+'"]');e.toggleClass("active",false)};t.toggleNew=function(a,i,e){var s=t.tasklist.find('[data-uuid="'+a+'"]');s.toggleClass("new",i);if(!e){$(window).trigger("action:taskbar.toggleNew",a)}};t.updateActive=function(a){var i=t.tasklist.find("li");i.removeClass("active");i.filter('[data-uuid="'+a+'"]').addClass("active")};t.isActive=function(a){var i=t.tasklist.find('li[data-uuid="'+a+'"]');return i.hasClass("active")};function a(){var a=t.tasklist.find("li");if(a.length>0){t.taskbar.attr("data-active","1")}else{t.taskbar.removeAttr("data-active")}}function i(){t.tasklist.find(".active").removeClass("active")}function e(e){var s=$("<div></div>").text(e.options.title||"NodeBB Task").html();var n=$("<li />").addClass(e.options.className).html('<a href="#">'+(e.options.icon?'<i class="fa '+e.options.icon+'"></i> ':"")+(e.options.image?'<img src="'+e.options.image+'"/> ':"")+'<span component="taskbar/title">'+s+"</span>"+"</a>").attr({"data-module":e.module,"data-uuid":e.uuid}).addClass(e.options.state!==undefined?e.options.state:"active");if(!e.options.state||e.options.state==="active"){i()}t.tasklist.append(n);a();e.element=n;n.data(e);$(window).trigger("action:taskbar.pushed",e)}t.updateTitle=function(a,i,e){t.tasklist.find('[data-module="'+a+'"][data-uuid="'+i+'"] [component="taskbar/title"]').text(e)};return t});
//# sourceMappingURL=public/src/modules/taskbar.js.map