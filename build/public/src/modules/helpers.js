"use strict";(function(e){if(typeof module==="object"&&module.exports){var a=require("nconf").get("relative_path");module.exports=e(require("../utils"),require("templates.js"),require("string"),a)}else if(typeof define==="function"&&define.amd){define("helpers",["string"],function(a){return e(utils,templates,a,config.relative_path)})}else{window.helpers=e(utils,templates,window.String,config.relative_path)}})(function(e,a,r,i){var t={displayMenuItem:n,buildMetaTag:s,buildLinkTag:o,stringify:c,escape:l,stripTags:u,generateCategoryBackground:f,generateChildrenCategories:p,generateTopicClass:d,displayUserSearch:g,membershipBtn:m,spawnPrivilegeStates:b,localeToHTML:h,renderTopicImage:v,renderDigestAvatar:k,userAgentIcons:w,register:y};function n(e,a){var r=e.navigation[a];if(!r){return false}var i=r.properties;var t=e.config?e.config.loggedIn:false;if(i){if(i.loggedIn&&!t||i.globalMod&&!e.isGlobalMod&&!e.isAdmin||i.adminOnly&&!e.isAdmin||i.searchInstalled&&!e.searchEnabled){return false}}if(r.route.match("/users")&&e.privateUserInfo&&!t){return false}if(r.route.match("/tags")&&e.privateTagListing&&!t){return false}return true}function s(e){var a=e.name?'name="'+e.name+'" ':"";var r=e.property?'property="'+e.property+'" ':"";var i=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+a+r+i+"/>\n\t"}function o(e){var a=e.link?'link="'+e.link+'" ':"";var r=e.rel?'rel="'+e.rel+'" ':"";var i=e.type?'type="'+e.type+'" ':"";var t=e.href?'href="'+e.href+'" ':"";var n=e.sizes?'sizes="'+e.sizes+'" ':"";return"<link "+a+r+i+n+t+"/>\n\t"}function c(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function l(a){return e.escapeHTML(a)}function u(e){return r(String(e)).stripTags().s}function f(e){if(!e){return""}var a=[];if(e.bgColor){a.push("background-color: "+e.bgColor)}if(e.color){a.push("color: "+e.color)}if(e.backgroundImage){a.push("background-image: url("+e.backgroundImage+")");if(e.imageClass){a.push("background-size: "+e.imageClass)}}return a.join("; ")+";"}function p(e){var a="";if(!e||!e.children||!e.children.length){return a}e.children.forEach(function(e){if(e&&!e.isSection){var r=e.link?e.link:i+"/category/"+e.slug;a+='<a href="'+r+'">'+'<span class="fa-stack fa-lg">'+'<i style="color:'+e.bgColor+';" class="fa fa-circle fa-stack-2x"></i>'+'<i style="color:'+e.color+';" class="fa fa-stack-1x '+e.icon+'"></i>'+"</span><small>"+e.name+"</small></a> "}});a=a?'<span class="category-children">'+a+"</span>":a;return a}function d(e){var a=[];if(e.locked){a.push("locked")}if(e.pinned){a.push("pinned")}if(e.deleted){a.push("deleted")}if(e.unread){a.push("unread")}return a.join(" ")}function g(e,a){return e.loggedIn||a==="true"}function m(e){if(e.isMember&&e.name!=="administrators"){return'<button class="btn btn-danger" data-action="leave" data-group="'+e.displayName+'"><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>'}if(e.isPending&&e.name!=="administrators"){return'<button class="btn btn-warning disabled"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>'}else if(e.isInvited){return'<button class="btn btn-link" data-action="rejectInvite" data-group="'+e.displayName+'">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="'+e.name+'"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>'}else if(!e.disableJoinRequests&&e.name!=="administrators"){return'<button class="btn btn-success" data-action="join" data-group="'+e.displayName+'"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>'}return""}function b(e,a){var r=[];for(var i in a){if(a.hasOwnProperty(i)){r.push({name:i,state:a[i]})}}return r.map(function(a){return'<td class="text-center" data-privilege="'+a.name+'"><input type="checkbox"'+(a.state?" checked":"")+(e==="guests"&&a.name==="groups:moderate"?' disabled="disabled"':"")+" /></td>"}).join("")}function h(e,a){e=e||a||"en-GB";return e.replace("_","-")}function v(e){if(e.thumb){return'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.username+'" />'}return'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.username+'" />'}function k(e){if(e.teaser){if(e.teaser.user.picture){return'<img style="vertical-align: middle; width: 16px; height: 16px; padding-right: 1em;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />'}return'<div style="width: 16px; height: 16px; line-height: 16px; font-size: 10px; margin-right: 1em; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block;">'+e.teaser.user["icon:text"]+"</div>"}if(e.user.picture){return'<img style="vertical-align: middle; width: 16px; height: 16px; padding-right: 1em;" src="'+e.user.picture+'" title="'+e.user.username+'" />'}return'<div style="width: 16px; height: 16px; line-height: 16px; font-size: 10px; margin-right: 1em; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block;">'+e.user["icon:text"]+"</div>"}function w(e){var a="";switch(e.platform){case"Linux":a+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":a+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":a+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":a+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":a+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":a+='<i class="fa fa-fw fa-mobile"></i>';break;default:a+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":a+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":a+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":a+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":a+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":a+='<i class="fa fa-fw fa-edge"></i>';break;default:a+='<i class="fa fa-fw fa-question-circle"></i>';break}return a}function y(){Object.keys(t).forEach(function(e){a.registerHelper(e,t[e])})}return t});
//# sourceMappingURL=public/src/modules/helpers.js.map