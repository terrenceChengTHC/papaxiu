"use strict";define("coverPhoto",["vendor/jquery/draggable-background/backgroundDraggable"],function(){var e={coverEl:null,saveFn:null};e.init=function(a,o,n,t){e.coverEl=a;e.saveFn=o;a.find(".upload").on("click",n);a.find(".resize").on("click",function(){r(a)});a.find(".remove").on("click",t);a.on("dragover",e.onDragOver).on("drop",e.onDrop);a.find(".save").on("click",e.save);a.addClass("initialised")};e.onDragOver=function(e){e.stopPropagation();e.preventDefault();e.originalEvent.dataTransfer.dropEffect="copy"};e.onDrop=function(a){a.stopPropagation();a.preventDefault();var o=a.originalEvent.dataTransfer.files;var n=new FileReader;if(o.length&&o[0].type.match("image.*")){n.onload=function(r){e.coverEl.css("background-image","url("+r.target.result+")");e.newCover=r.target.result};n.readAsDataURL(o[0]);r(e.coverEl)}};function r(e){e.toggleClass("active",1).backgroundDraggable({axis:"y",units:"percent"});app.alert({alert_id:"drag_start",title:"[[modules:cover.dragging_title]]",message:"[[modules:cover.dragging_message]]",timeout:5e3})}e.save=function(){e.coverEl.addClass("saving");e.saveFn(e.newCover||undefined,e.coverEl.css("background-position"),function(r){if(!r){e.coverEl.toggleClass("active",0);e.coverEl.backgroundDraggable("disable");e.coverEl.off("dragover",e.onDragOver);e.coverEl.off("drop",e.onDrop);app.alertSuccess("[[modules:cover.saved]]")}else{app.alertError(r.message)}e.coverEl.removeClass("saving")})};return e});
//# sourceMappingURL=public/src/modules/coverPhoto.js.map