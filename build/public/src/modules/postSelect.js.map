{"version":3,"sources":["public/src/modules/postSelect.js"],"names":["define","components","PostSelect","pids","init","onSelect","length","get","on","togglePostSelection","$","this","disableClicksOnPosts","post","callback","newPid","attr","parseInt","index","indexOf","push","toggleClass","splice","sort","a","b","disableClicks","enableClicksOnPosts","off"],"mappings":"AAAA,aAGAA,OAAO,cAAe,cAAe,SAAUC,GAC9C,IAAIC,KAEJA,EAAWC,QAEXD,EAAWE,KAAO,SAAUC,GAC3BH,EAAWC,KAAKG,OAAS,EACzBL,EAAWM,IAAI,SAASC,GAAG,QAAS,aAAc,WACjDC,EAAoBC,EAAEC,MAAON,KAE9BO,KAID,SAASH,EAAoBI,EAAMC,GAClC,IAAIC,EAASF,EAAKG,KAAK,YAEvB,GAAIC,SAASJ,EAAKG,KAAK,cAAe,MAAQ,EAAG,CAChD,OAGD,GAAID,EAAQ,CACX,IAAIG,EAAQhB,EAAWC,KAAKgB,QAAQJ,GACpC,GAAIG,KAAW,EAAG,CACjBhB,EAAWC,KAAKiB,KAAKL,GACrBF,EAAKQ,YAAY,aAAc,UACzB,CACNnB,EAAWC,KAAKmB,OAAOJ,EAAO,GAC9BL,EAAKQ,YAAY,aAAc,OAGhC,GAAInB,EAAWC,KAAKG,OAAQ,CAC3BJ,EAAWC,KAAKoB,KAAK,SAAUC,EAAGC,GAAK,OAAOD,EAAIC,IAEnDX,KAKF,SAASY,IACR,OAAO,MAGR,SAASd,IACRX,EAAWM,IAAI,QAAQC,GAAG,QAAS,WAAYkB,GAGhDxB,EAAWyB,oBAAsB,WAChC1B,EAAWM,IAAI,QAAQqB,IAAI,QAAS,WAAYF,IAIjD,OAAOxB","file":"public/src/modules/postSelect.js","sourcesContent":["'use strict';\n\n\ndefine('postSelect', ['components'], function (components) {\n\tvar PostSelect = {};\n\n\tPostSelect.pids = [];\n\n\tPostSelect.init = function (onSelect) {\n\t\tPostSelect.pids.length = 0;\n\t\tcomponents.get('topic').on('click', '[data-pid]', function () {\n\t\t\ttogglePostSelection($(this), onSelect);\n\t\t});\n\t\tdisableClicksOnPosts();\n\t};\n\n\n\tfunction togglePostSelection(post, callback) {\n\t\tvar newPid = post.attr('data-pid');\n\n\t\tif (parseInt(post.attr('data-index'), 10) === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (newPid) {\n\t\t\tvar index = PostSelect.pids.indexOf(newPid);\n\t\t\tif (index === -1) {\n\t\t\t\tPostSelect.pids.push(newPid);\n\t\t\t\tpost.toggleClass('bg-success', true);\n\t\t\t} else {\n\t\t\t\tPostSelect.pids.splice(index, 1);\n\t\t\t\tpost.toggleClass('bg-success', false);\n\t\t\t}\n\n\t\t\tif (PostSelect.pids.length) {\n\t\t\t\tPostSelect.pids.sort(function (a, b) { return a - b; });\n\t\t\t}\n\t\t\tcallback();\n\t\t}\n\t}\n\n\n\tfunction disableClicks() {\n\t\treturn false;\n\t}\n\n\tfunction disableClicksOnPosts() {\n\t\tcomponents.get('post').on('click', 'button,a', disableClicks);\n\t}\n\n\tPostSelect.enableClicksOnPosts = function () {\n\t\tcomponents.get('post').off('click', 'button,a', disableClicks);\n\t};\n\n\n\treturn PostSelect;\n});\n"]}