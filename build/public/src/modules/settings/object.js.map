{"version":3,"sources":["public/src/modules/settings/object.js"],"names":["define","SettingsObject","helper","addObjectPropertyElement","field","key","attributes","prop","value","separator","insertCb","prepend","append","type","element","deepClone","$","createElementOfType","tagName","attr","name","hasOwnProperty","val","search","data","substring","fillField","length","types","use","this","create","ignored","createElement","set","properties","propertyIndex","propertyName","_error","document","createTextNode","empty","Array","isArray","undefined","clone","el","get","trim","each","i","property","readValue","isTrue","Object","keys"],"mappings":"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","file":"public/src/modules/settings/object.js","sourcesContent":["'use strict';\n\ndefine('settings/object', function () {\n\tvar SettingsObject;\n\tvar helper = null;\n\n\t/**\n\t Creates a new child-element of given property with given data and calls given callback with elements to add.\n\t @param field Any wrapper that contains all properties of the object.\n\t @param key The key of the object.\n\t @param attributes The attributes to call {@link Settings.helper.createElementOfType} with or to add as\n\t element-attributes.\n\t @param value The value to call {@link Settings.helper.fillField} with.\n\t @param separator The separator to use.\n\t @param insertCb The callback to insert the elements.\n\t */\n\tfunction addObjectPropertyElement(field, key, attributes, prop, value, separator, insertCb) {\n\t\tvar prepend = attributes['data-prepend'];\n\t\tvar append = attributes['data-append'];\n\t\tvar type;\n\t\tvar element;\n\t\tdelete attributes['data-prepend'];\n\t\tdelete attributes['data-append'];\n\t\tattributes = helper.deepClone(attributes);\n\t\ttype = attributes['data-type'] || attributes.type || 'text';\n\t\telement = $(helper.createElementOfType(type, attributes.tagName, attributes));\n\t\telement.attr('data-parent', '_' + key);\n\t\telement.attr('data-prop', prop);\n\t\tdelete attributes['data-type'];\n\t\tdelete attributes.tagName;\n\t\tfor (var name in attributes) {\n\t\t\tif (attributes.hasOwnProperty(name)) {\n\t\t\t\tvar val = attributes[name];\n\t\t\t\tif (name.search('data-') === 0) {\n\t\t\t\t\telement.data(name.substring(5), val);\n\t\t\t\t} else if (name.search('prop-') === 0) {\n\t\t\t\t\telement.prop(name.substring(5), val);\n\t\t\t\t} else {\n\t\t\t\t\telement.attr(name, val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\thelper.fillField(element, value);\n\t\tif ($('[data-parent=\"_' + key + '\"]', field).length) {\n\t\t\tinsertCb(separator);\n\t\t}\n\t\tif (prepend) {\n\t\t\tinsertCb(prepend);\n\t\t}\n\t\tinsertCb(element);\n\t\tif (append) {\n\t\t\tinsertCb(append);\n\t\t}\n\t}\n\n\tSettingsObject = {\n\t\ttypes: ['object'],\n\t\tuse: function () {\n\t\t\thelper = this.helper;\n\t\t},\n\t\tcreate: function (ignored, tagName) {\n\t\t\treturn helper.createElement(tagName || 'div');\n\t\t},\n\t\tset: function (element, value) {\n\t\t\tvar properties = element.data('attributes') || element.data('properties');\n\t\t\tvar key = element.data('key') || element.data('parent');\n\t\t\tvar separator = element.data('split') || ', ';\n\t\t\tvar propertyIndex;\n\t\t\tvar propertyName;\n\t\t\tvar attributes;\n\t\t\tseparator = (function () {\n\t\t\t\ttry {\n\t\t\t\t\treturn $(separator);\n\t\t\t\t} catch (_error) {\n\t\t\t\t\treturn $(document.createTextNode(separator));\n\t\t\t\t}\n\t\t\t}());\n\t\t\telement.empty();\n\t\t\tif (typeof value !== 'object') {\n\t\t\t\tvalue = {};\n\t\t\t}\n\t\t\tif (Array.isArray(properties)) {\n\t\t\t\tfor (propertyIndex in properties) {\n\t\t\t\t\tif (properties.hasOwnProperty(propertyIndex)) {\n\t\t\t\t\t\tattributes = properties[propertyIndex];\n\t\t\t\t\t\tif (typeof attributes !== 'object') {\n\t\t\t\t\t\t\tattributes = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpropertyName = attributes['data-prop'] || attributes['data-property'] || propertyIndex;\n\t\t\t\t\t\tif (value[propertyName] === undefined && attributes['data-new'] !== undefined) {\n\t\t\t\t\t\t\tvalue[propertyName] = attributes['data-new'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\taddObjectPropertyElement(element, key, attributes, propertyName, value[propertyName], separator.clone(), function (el) {\n\t\t\t\t\t\t\telement.append(el);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tget: function (element, trim, empty) {\n\t\t\tvar key = element.data('key') || element.data('parent');\n\t\t\tvar properties = $('[data-parent=\"_' + key + '\"]', element);\n\t\t\tvar value = {};\n\t\t\tproperties.each(function (i, property) {\n\t\t\t\tproperty = $(property);\n\t\t\t\tvar val = helper.readValue(property);\n\t\t\t\tvar prop = property.data('prop');\n\t\t\t\tvar empty = helper.isTrue(property.data('empty'));\n\t\t\t\tif (empty || (val !== undefined && (val == null || val.length !== 0))) {\n\t\t\t\t\tvalue[prop] = val;\n\t\t\t\t\treturn val;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (empty || Object.keys(value).length) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t},\n\t};\n\n\treturn SettingsObject;\n});\n"]}